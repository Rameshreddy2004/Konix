<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tax Optimisation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-gray-900 text-white font-sans p-5">
    <div class="max-w-6xl mx-auto">
        <header class="flex items-center p-4 bg-gray-800 rounded">
            <h1 class="text-2xl font-bold">Tax Optimisation</h1>
            <div class="relative ml-4">
                <a href="#" class="text-blue-500 hover:underline" id="how-it-works">How it works?</a>
                <div class="tooltip hidden absolute z-10 bg-gray-800 p-4 rounded shadow-lg w-64">
                    <ul class="list-disc pl-5">
                        <li>See your capital gains for FY 2024-25 in the left card</li>
                        <li>Check boxes for assets you plan on selling to reduce your tax liability</li>
                        <li>Instantly see your updated tax liability in the right card</li>
                    </ul>
                    <p><strong>Pro tip:</strong> Experiment with different combinations of your holdings to optimize your tax liability</p>
                </div>
            </div>
        </header>

        <div class="mt-4 border border-blue-500 rounded-lg p-4">
            <div class="flex items-center justify-between cursor-pointer" id="disclaimer-toggle">
                <div class="flex items-center">
                    <span class="info-icon text-blue-500">ⓘ</span>
                    <span class="ml-2 text-lg font-bold">Important Notes And Disclaimer</span>
                </div>
                <span class="chevron text-blue-500">▼</span>
            </div>
            <div class="disclaimer-content hidden overflow-hidden">
                <ul class="list-disc pl-5 mt-2 bg-blue-700 p-4 rounded shadow-lg">
                    <li>
                        <strong>Price Source Disclaimer:</strong> Please note that the current price of your coins may differ from the prices listed on specific exchanges. This is because we use CoinGecko as our default price source for certain exchanges, rather than fetching prices directly from the exchange.
                    </li>
                    <li>
                        <strong>Country-specific Availability:</strong> Tax loss harvesting may not be supported in all countries. We strongly recommend consulting with your local tax advisor or accountant before performing any related actions on your exchange.
                    </li>
                    <li>
                        <strong>Utilization of Losses:</strong> Tax loss harvesting typically allows you to offset capital gains. However, if you have zero or no applicable crypto capital gains, the usability of these harvested losses may be limited. Kindly confirm with your tax advisor how such losses can be applied in your situation.
                    </li>
                </ul>
            </div>
        </div>

        <div class="flex flex-col md:flex-row justify-between mt-8 space-y-4 md:space-y-0 md:space-x-4">
            <section class="w-full md:w-[48%] bg-gray-800 p-5 rounded-lg shadow-lg dark-card">
                <h2 class="text-xl font-bold mb-4">Pre Harvesting</h2>
                <table class="w-full">
                    <tbody>
                        <tr>
                            <td class="py-2">Profits</td>
                            <td id="pre-profits" class="text-right"></td>
                        </tr>
                        <tr>
                            <td class="py-2">Losses</td>
                            <td id="pre-losses" class="text-right"></td>
                        </tr>
                        <tr>
                            <td class="py-2">Net Capital Gains</td>
                            <td id="pre-net-gains" class="text-right"></td>
                        </tr>
                    </tbody>
                </table>
                <p class="mt-4">Realised Capital Gains: <span id="pre-realised"></span></p>
            </section>

            <section class="w-full md:w-[48%] bg-gradient-to-br from-blue-500 to-green-400 p-5 rounded-lg shadow-lg gradient-card">
                <h2 class="text-xl font-bold mb-4">After Harvesting</h2>
                <table class="w-full">
                    <tbody>
                        <tr>
                            <td class="py-2">Profits</td>
                            <td id="post-profits" class="text-right"></td>
                        </tr>
                        <tr>
                            <td class="py-2">Losses</td>
                            <td id="post-losses" class="text-right"></td>
                        </tr>
                        <tr>
                            <td class="py-2">Net Capital Gains</td>
                            <td id="post-net-gains" class="text-right"></td>
                        </tr>
                    </tbody>
                </table>
                <p class="mt-4">Realised Capital Gains: <span id="post-realised"></span></p>
                <div class="flex justify-between mt-2">
                    <p>Short Term: <span id="post-short-term" class="positive"></span></p>
                    <p>Long Term: <span id="post-long-term" class="positive"></span></p>
                </div>
                <p id="savings" class="mt-2 text-green-400 hidden"></p>
            </section>
        </div>

        <section class="mt-8">
            <h2 class="text-xl font-bold mb-4">Holdings</h2>
            <table class="w-full border-collapse holdings-table">
                <thead>
                    <tr class="bg-blue-500 text-white">
                        <th class="p-3 text-left"><input type="checkbox" id="select-all" /></th>
                        <th class="p-3 texat-left">Asset</th>
                        <th class="p-3 text-left">Holdings<br><small class="text-gray-300">Avg Buy Price</small></th>
                        <th class="p-3 text-left">Current Price</th>
                        <th class="p-3 text-left">Short-Term</th>
                        <th class="p-3 text-left">Long-Term</th>
                        <th class="p-3 text-left">Amount to Sell</th>
                    </tr>
                </thead>
                <tbody id="holdings-body"></tbody>
            </table>
        </section>
    </div>

    <div id="loader" class="text-center">Loading...</div>
    <script src="script.js"></script>
</body>
</html>